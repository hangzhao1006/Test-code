# å½“å‰ç³»ç»ŸçŠ¶æ€è¯´æ˜

**æ›´æ–°æ—¶é—´**: 2025-11-14 14:23

---

## âœ… æ­£å¸¸å·¥ä½œçš„åŠŸèƒ½

### 1. å‰ç«¯åº”ç”¨
- **çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ
- **è®¿é—®åœ°å€**: http://localhost:3001
- **ç«¯å£**: 3001
- **åŠŸèƒ½**:
  - UI ç•Œé¢æ­£å¸¸æ˜¾ç¤º
  - å¤©æ°”æ—¥å†ç»„ä»¶åŠ è½½
  - çš®è‚¤çŠ¶å†µè®°å½•
  - å›¾ç‰‡ä¸Šä¼ ç•Œé¢

### 2. åç«¯ API
- **çŠ¶æ€**: âœ… æœåŠ¡å¥åº·
- **è®¿é—®åœ°å€**: http://localhost:8000
- **API æ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **åŠŸèƒ½**:
  - FastAPI æœåŠ¡æ­£å¸¸
  - å¯¹è¯æ¥å£å¯ç”¨
  - å›¾ç‰‡åˆ†ææ¥å£å¯ç”¨

### 3. ChromaDB å‘é‡æ•°æ®åº“
- **çŠ¶æ€**: âœ… æ•°æ®å·²åŠ è½½
- **ç«¯å£**: 8001
- **æ•°æ®é‡**:
  - 7,933 ä¸ªäº§å“ chunks
  - 2,836 ä¸ªäº§å“æœ‰ Amazon é“¾æ¥
  - ä½¿ç”¨ OpenAI text-embedding-3-small (1536 ç»´)

### 4. å¤©æ°”åŠŸèƒ½
- **API**: wttr.in
- **çŠ¶æ€**: âš ï¸ éœ€è¦åœ¨æµè§ˆå™¨æµ‹è¯•
- **è¯´æ˜**:
  - ä½¿ç”¨å¤‡ä»½ç‰ˆæœ¬çš„å®ç°
  - æ”¯æŒåŸºäºä½ç½®çš„å®æ—¶å¤©æ°”
  - å¦‚æœæ— æ³•è·å–ä½ç½®ï¼Œä½¿ç”¨ IP å®šä½
  - **æ³¨æ„**: ç»ˆç«¯æµ‹è¯•å¯èƒ½å¤±è´¥ï¼ˆç½‘ç»œé™åˆ¶ï¼‰ï¼Œä½†æµè§ˆå™¨åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œ

---

## âŒ æ— æ³•å·¥ä½œçš„åŠŸèƒ½

### äº§å“æœç´¢ï¼ˆRAG æ£€ç´¢ï¼‰

**é—®é¢˜**: OpenAI API è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```
OpenAI embedding error: Connection error.
Failed to generate OpenAI embeddings after 5 attempts.
```

**åŸå› **:
- åç«¯å®¹å™¨æ— æ³•è¿æ¥åˆ° OpenAI API (api.openai.com)
- è¿™æ˜¯ç½‘ç»œç¯å¢ƒé™åˆ¶å¯¼è‡´çš„
- ä¸æ˜¯ä»£ç é—®é¢˜

**å½±å“**:
- âŒ äº§å“æœç´¢åŠŸèƒ½æ— æ³•ä½¿ç”¨
- âŒ æ— æ³•ç”ŸæˆæŸ¥è¯¢çš„ embedding
- âœ… ChromaDB æ•°æ®åº“æœ¬èº«æ­£å¸¸
- âœ… å·²æœ‰çš„ embeddings éƒ½å­˜åœ¨

**æŠ€æœ¯è¯´æ˜**:
æœç´¢æµç¨‹éœ€è¦ï¼š
1. ç”¨æˆ·è¾“å…¥æœç´¢æŸ¥è¯¢ï¼ˆä¾‹å¦‚ "ä¿æ¹¿éœœ"ï¼‰
2. **åç«¯è°ƒç”¨ OpenAI API** å°†æŸ¥è¯¢è½¬æ¢ä¸º embedding å‘é‡ â† **è¿™ä¸€æ­¥å¤±è´¥**
3. ä½¿ç”¨ embedding åœ¨ ChromaDB ä¸­æœç´¢ç›¸ä¼¼äº§å“
4. è¿”å›æœç´¢ç»“æœ

ç”±äºç¬¬ 2 æ­¥å¤±è´¥ï¼Œæ•´ä¸ªæœç´¢åŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚

---

## ğŸ”§ æ¢å¤çš„é…ç½®

### ä»å¤‡ä»½ç‰ˆæœ¬æ¢å¤çš„æ–‡ä»¶

1. **WeatherCalendar.jsx**
   - è·¯å¾„: `frontend-template/src/components/WeatherCalendar.jsx`
   - æ¥æº: `app-building-template 2` å¤‡ä»½
   - ä½¿ç”¨ wttr.in API
   - ä¸åŒ…å«è¯­è¨€åˆ‡æ¢åŠŸèƒ½

2. **page.jsx**
   - è·¯å¾„: `frontend-template/src/app/page.jsx`
   - æ¥æº: `app-building-template 2` å¤‡ä»½
   - ç§»é™¤äº†è¯­è¨€åˆ‡æ¢åŠŸèƒ½ï¼ˆé¿å…è¿è¡Œæ—¶é”™è¯¯ï¼‰
   - ç•Œé¢ä¸ºä¸­æ–‡

### Docker é…ç½®

**docker-compose.yml** (line 69):
```yaml
# - /app/node_modules  # å·²æ³¨é‡Šï¼Œä½¿ç”¨ä¸»æœºçš„ node_modules
```

**åŸå› **:
- å®¹å™¨å†…æ— æ³•é€šè¿‡ npm å®‰è£…ä¾èµ–ï¼ˆç½‘ç»œé™åˆ¶ï¼‰
- ä¸»æœºä¸Šå·²å®‰è£… `@radix-ui/react-tabs`
- ä½¿ç”¨ä¸»æœºçš„ node_modules ç›®å½•

---

## ğŸŒ ç½‘ç»œé™åˆ¶è¯´æ˜

### å—å½±å“çš„æœåŠ¡

1. **OpenAI API** (api.openai.com)
   - âŒ å®¹å™¨æ— æ³•è®¿é—®
   - å½±å“: æœç´¢åŠŸèƒ½

2. **npm registry** (registry.npmjs.org)
   - âŒ å®¹å™¨æ— æ³•è®¿é—®
   - å½±å“: æ— æ³•åœ¨å®¹å™¨å†…å®‰è£…ä¾èµ–
   - è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨ä¸»æœºçš„ node_modules

3. **Docker Hub** (docker.io)
   - âŒ æ‹‰å–é•œåƒæ—¶å¶å°”å¤±è´¥
   - è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨å·²æœ‰é•œåƒï¼Œé¿å… `--build`

### å¯ä»¥è®¿é—®çš„æœåŠ¡

1. **wttr.in** (å¤©æ°” API)
   - âœ… æµè§ˆå™¨å¯ä»¥è®¿é—®
   - âš ï¸ ç»ˆç«¯/å®¹å™¨å¯èƒ½æ— æ³•è®¿é—®

2. **ui-avatars.com** (å¤´åƒç”Ÿæˆ)
   - âœ… å¯ä»¥è®¿é—®

3. **æœ¬åœ°æœåŠ¡**
   - âœ… ChromaDB (å®¹å™¨é—´é€šä¿¡)
   - âœ… Backend API (å®¹å™¨é—´é€šä¿¡)
   - âœ… Frontend (ä¸»æœºè®¿é—®)

---

## ğŸ“± ä½¿ç”¨å»ºè®®

### å¯åŠ¨ç³»ç»Ÿ

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# ç­‰å¾… 30 ç§’è®©æœåŠ¡å®Œå…¨å¯åŠ¨
sleep 30

# é‡æ–°åŠ è½½ ChromaDB æ•°æ®
docker exec skincare-backend python /app/backend/reload_with_links.py

# æ£€æŸ¥çŠ¶æ€
docker-compose ps
curl http://localhost:8000/health
```

### è®¿é—®åº”ç”¨

1. **æ‰“å¼€æµè§ˆå™¨è®¿é—®**: http://localhost:3001
2. **å…è®¸ä½ç½®æƒé™**ï¼ˆç”¨äºå¤©æ°”åŠŸèƒ½ï¼‰
3. **æµ‹è¯•åŠŸèƒ½**:
   - âœ… æŸ¥çœ‹å¤©æ°”ï¼ˆå³ä¾§æ ï¼‰
   - âœ… è®°å½•çš®è‚¤çŠ¶å†µ
   - âœ… ä¸Šä¼ çš®è‚¤ç…§ç‰‡
   - âœ… AI å¯¹è¯ï¼ˆå¦‚æœå¯¹è¯æ¨¡å‹å¯ç”¨ï¼‰
   - âŒ äº§å“æœç´¢ï¼ˆOpenAI API é™åˆ¶ï¼‰

### å¦‚æœéœ€è¦æœç´¢åŠŸèƒ½

**é€‰é¡¹ 1**: è§£å†³ç½‘ç»œé™åˆ¶
- é…ç½®ä»£ç†æˆ– VPN
- ç¡®ä¿å®¹å™¨å¯ä»¥è®¿é—® api.openai.com

**é€‰é¡¹ 2**: ä½¿ç”¨é¢„è®¡ç®—çš„ embeddings
- ä¸ç”Ÿæˆæ–°çš„æŸ¥è¯¢ embedding
- åªä½¿ç”¨é¢„åŠ è½½çš„äº§å“æ•°æ®
- éœ€è¦ä¿®æ”¹æœç´¢é€»è¾‘

**é€‰é¡¹ 3**: æ›´æ¢ embedding æœåŠ¡
- ä½¿ç”¨æœ¬åœ° embedding æ¨¡å‹ï¼ˆå¦‚ sentence-transformersï¼‰
- ä¸ä¾èµ– OpenAI API
- éœ€è¦é‡æ–°ç”Ÿæˆæ‰€æœ‰äº§å“çš„ embeddings

---

## ğŸ“Š å®¹å™¨çŠ¶æ€

```bash
$ docker-compose ps
NAME                IMAGE                            STATUS
skincare-backend    app-building-template-backend    Up (healthy)
skincare-chromadb   chromadb/chroma:latest           Up
skincare-frontend   app-building-template-frontend   Up
```

### ç«¯å£æ˜ å°„

- **3001** â†’ Frontend (Next.js)
- **8000** â†’ Backend (FastAPI)
- **8001** â†’ ChromaDB

---

## ğŸ” è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
docker logs skincare-frontend -f

# æŸ¥çœ‹åç«¯æ—¥å¿—
docker logs skincare-backend -f

# æŸ¥çœ‹ ChromaDB æ—¥å¿—
docker logs skincare-chromadb -f

# æ£€æŸ¥ ChromaDB æ•°æ®
docker exec skincare-backend python -c "
import chromadb
client = chromadb.HttpClient(host='chromadb', port=8000)
coll = client.get_collection('char-split-collection')
print(f'Documents: {coll.count()}')
"

# æµ‹è¯•åç«¯å¥åº·
curl http://localhost:8000/health

# æµ‹è¯•æœç´¢ï¼ˆä¼šå¤±è´¥ï¼‰
curl "http://localhost:8000/api/search?q=moisturizer&top_k=3"
```

---

## ğŸ“ æ€»ç»“

### å¯ç”¨åŠŸèƒ½
- âœ… å‰ç«¯ç•Œé¢
- âœ… å¤©æ°”æ˜¾ç¤ºï¼ˆæµè§ˆå™¨ï¼‰
- âœ… çš®è‚¤çŠ¶å†µè®°å½•
- âœ… AI å¯¹è¯ï¼ˆå¦‚æœæ¨¡å‹å¯ç”¨ï¼‰
- âœ… å›¾ç‰‡åˆ†æï¼ˆå¦‚æœ GPT-4 Vision å¯ç”¨ï¼‰

### ä¸å¯ç”¨åŠŸèƒ½
- âŒ äº§å“æœç´¢ï¼ˆOpenAI API é™åˆ¶ï¼‰

### æ ¹æœ¬åŸå› 
- ç½‘ç»œç¯å¢ƒé™åˆ¶å®¹å™¨è®¿é—®å¤–éƒ¨ API
- è¿™ä¸æ˜¯ä»£ç é—®é¢˜ï¼Œæ˜¯ç¯å¢ƒé—®é¢˜

### å»ºè®®
- åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•å¯ç”¨åŠŸèƒ½
- å¦‚éœ€æœç´¢åŠŸèƒ½ï¼Œéœ€è¦è§£å†³ç½‘ç»œé™åˆ¶æˆ–æ›´æ¢ embedding æ–¹æ¡ˆ
- å½“å‰é…ç½®å·²æ˜¯æœ€ä¼˜çŠ¶æ€ï¼ˆä½¿ç”¨å¤‡ä»½ç‰ˆæœ¬çš„ç¨³å®šä»£ç ï¼‰
